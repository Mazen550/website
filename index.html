<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy Valentine's Day</title>
<style>
    body { margin:0; padding:0; overflow:hidden; background:#000; }
    canvas { display:block; }
</style>
</head>
<body>
<canvas id="starfield"></canvas>
<script>
const canvas = document.getElementById("starfield");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// STARFIELD
const stars = 200;
const starArray = [];
const colorrange = [0,60,240];
function getRandom(min,max){ return Math.floor(Math.random()*(max-min+1))+min; }
for(let i=0;i<stars;i++){
    starArray.push({
        x: Math.random()*canvas.width,
        y: Math.random()*canvas.height,
        r: Math.random()*1.5,
        hue: colorrange[getRandom(0,colorrange.length-1)],
        sat: getRandom(50,100),
        opacity: Math.random()
    });
}

// HEART
const heartParticles = [];
const heartCount = 800;
let heartAngle = 0;
let heartVisible = false;

function heartShape(t,z){
    const scale=12;
    return {
        x: scale*16*Math.pow(Math.sin(t),3),
        y: -scale*(13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t)),
        z
    };
}

function createHeart(){
    heartParticles.length = 0;
    const layers = 20;
    const perLayer = Math.floor(heartCount/layers);
    for(let l=0;l<layers;l++){
        const zDepth=(l/layers-0.5)*150;
        for(let i=0;i<perLayer;i++){
            const t=(i/perLayer)*Math.PI*2;
            const pos=heartShape(t,zDepth);
            const scaleRand=Math.random();
            heartParticles.push({
                currentX:(Math.random()-0.5)*canvas.width*2,
                currentY:(Math.random()-0.5)*canvas.height*2,
                currentZ:(Math.random()-0.5)*500,
                targetX: pos.x*scaleRand,
                targetY: pos.y*scaleRand,
                targetZ: pos.z + (Math.random()-0.5)*20
            });
        }
    }
}
createHeart();

// TEXTS
const texts = [
    { text: "everyday day I cannot believe how lucky I am", duration:5 },
    { text: "amongst trillions and trillions of stars, over billions of years", duration:5 },
    { text: "to be alive, and to get to spend this life with you", duration:5 },
    { text: "is so incredibly, unfathomably unlikely", duration:5 },
    { text: "and yet here I am to get the impossible chance to get to know you", duration:5 },
    { text: "I love you so much Dalal, more than all the time and space in the universe can contain", duration:5 },
    { text: "and I can't wait to spend all the time in the world to share that love with you!", duration:5 }
];
let startTime = null;

// DRAW FUNCTIONS
function drawStars(){
    for(let star of starArray){
        ctx.beginPath();
        ctx.arc(star.x,star.y,star.r,0,Math.PI*2);
        ctx.fillStyle=`hsla(${star.hue},${star.sat}%,88%,${star.opacity})`;
        ctx.fill();
        if(Math.random()>0.99) star.opacity=Math.random();
    }
}

function drawHeart(){
    heartAngle += 0.008;
    const cos=Math.cos(heartAngle), sin=Math.sin(heartAngle);
    const sorted = heartParticles.slice().sort((a,b)=> (a.targetX*sin+a.targetZ*cos)-(b.targetX*sin+b.targetZ*cos));
    for(let p of sorted){
        p.currentX += (p.targetX - p.currentX)*0.03;
        p.currentY += (p.targetY - p.currentY)*0.03;
        p.currentZ += (p.targetZ - p.currentZ)*0.03;
        let x = p.currentX*cos - p.currentZ*sin;
        let z = p.currentX*sin + p.currentZ*cos;
        let scale = 250/(250+z);
        let px = x*scale + canvas.width/2;
        let py = p.currentY*scale + canvas.height/2;
        let size = scale*2.5;
        let brightness = Math.max(0.3, Math.min(1, scale));
        ctx.fillStyle=`rgba(255,150,200,${brightness*0.8})`;
        ctx.fillRect(px,py,size,size);
    }
}

// TEXT RENDERING
function drawText(elapsed){
    let tTime=0;
    let currentOpacity=0;
    for(let i=0;i<texts.length;i++){
        let start=tTime;
        let end=start+texts[i].duration;
        if(elapsed>=start && elapsed<=end){
            let progress=(elapsed-start)/texts[i].duration;
            currentOpacity = progress<=0.5? progress*2 : (1-(progress-0.5)*2); // fade in/out
            ctx.fillStyle=`rgba(255,150,200,${currentOpacity})`;
            ctx.font=`${Math.min(30,canvas.width/24)}px Comic Sans MS`;
            ctx.textAlign="center";
            ctx.shadowColor="rgba(255,100,200,1)";
            ctx.shadowBlur=10;
            ctx.fillText(texts[i].text,canvas.width/2,canvas.height/2);
            if(i>=5) heartVisible=true; // heart appears after last texts
        }
        tTime=end;
    }
}

function animate(timestamp){
    if(!startTime) startTime=timestamp;
    const elapsed=(timestamp-startTime)/1000;
    ctx.fillStyle="rgba(0,0,0,0.25)";
    ctx.fillRect(0,0,canvas.width,canvas.height);
    drawStars();
    drawText(elapsed);
    if(heartVisible) drawHeart();
    requestAnimationFrame(animate);
}

animate();

// RESIZE
window.addEventListener("resize",()=>{
    canvas.width=window.innerWidth;
    canvas.height=window.innerHeight;
});
</script>
</body>
</html>
